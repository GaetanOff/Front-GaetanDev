<div class="relative min-h-screen w-full max-w-full overflow-x-hidden flex flex-col items-center justify-start p-4">
  <ngx-sonner-toaster position="bottom-left" richColors />

  @if (!isAdminRoute()) {
    <div class="absolute top-0 -left-4 w-72 h-72 bg-green-400 rounded-full mix-blend-multiply filter blur-xl opacity-50 animate-blob"></div>
    <div class="absolute top-0 -right-4 w-72 h-72 bg-teal-300 rounded-full mix-blend-multiply filter blur-xl opacity-50 animate-blob animation-delay-2000"></div>
    <div class="absolute bottom-0 left-20 w-72 h-72 bg-lime-400 rounded-full mix-blend-multiply filter blur-xl opacity-50 animate-blob animation-delay-4000"></div>

    <header class="fixed top-4 md:top-6 z-50 w-full px-4 max-w-full flex justify-center perspective-1000">
      <nav class="group transition-all duration-500 ease-out px-2 py-2 md:px-3 md:py-2 w-full md:w-auto min-w-[320px] border border-white/20 backdrop-blur-xl rounded-3xl ">

        <div class="flex items-center justify-between md:justify-center relative z-10">

          <div class="hidden md:flex items-center justify-center space-x-1">
            <a [routerLink]="localeRoute.getLocalizedRoute('/')"
               routerLinkActive="bg-white/20 shadow-inner font-semibold text-white"
               [routerLinkActiveOptions]="{exact: true}"
               class="px-4 py-2 rounded-full text-sm font-medium text-white/90 hover:bg-white/10 hover:text-white transition-all duration-300 hover:scale-105 active:scale-95">
               {{ i18n.text().navbar.home }}
            </a>

            <a [routerLink]="localeRoute.getLocalizedRoute('/about')"
               routerLinkActive="bg-white/20 shadow-inner font-semibold text-white"
               class="px-4 py-2 rounded-full text-sm font-medium text-white/90 hover:bg-white/10 hover:text-white transition-all duration-300 hover:scale-105 active:scale-95">
               {{ i18n.text().navbar.about }}
            </a>

            <a [routerLink]="localeRoute.getLocalizedRoute('/achievements')"
               routerLinkActive="bg-white/20 shadow-inner font-semibold text-white"
               class="px-4 py-2 rounded-full text-sm font-medium text-white/90 hover:bg-white/10 hover:text-white transition-all duration-300 hover:scale-105 active:scale-95">
               {{ i18n.text().navbar.achievements }}
            </a>

            <a [routerLink]="localeRoute.getLocalizedRoute('/contact')"
               routerLinkActive="bg-white/20 shadow-inner font-semibold text-white"
               class="px-4 py-2 rounded-full text-sm font-medium text-white/90 hover:bg-white/10 hover:text-white transition-all duration-300 hover:scale-105 active:scale-95">
               {{ i18n.text().contact.title }}
            </a>

            <div class="h-5 w-px bg-gradient-to-b from-transparent via-white/20 to-transparent mx-3"></div>

            <button (click)="onSwitchLanguage()"
                    [attr.aria-label]="(i18n.isEnglish() ? 'Switch to French' : 'Passer en anglais')"
                    class="w-10 h-10 p-0.5 rounded-full border border-white/10 hover:bg-white/10 transition-all duration-300 hover:rotate-12 active:scale-90 hover:shadow-lg">
              <img [src]="languageImg()" alt="Language flag" class="w-full h-full object-cover rounded-full">
            </button>
          </div>

          <div class="md:hidden flex w-full items-center justify-between pl-2">
            <span class="text-white/80 font-bold tracking-wide text-sm">Menu</span>

            <div class="flex items-center gap-3">
                <button (click)="onSwitchLanguage()" 
                        [attr.aria-label]="(i18n.isEnglish() ? 'Switch to French' : 'Passer en anglais')"
                        class="w-8 h-8 rounded-full border border-white/10 active:scale-90 transition-transform">
                    <img [src]="languageImg()" alt="Language flag" class="w-full h-full object-cover rounded-full">
                </button>

                <button (click)="toggleMenu()" 
                        [attr.aria-label]="(isMenuOpen() ? (i18n.isEnglish() ? 'Close menu' : 'Fermer le menu') : (i18n.isEnglish() ? 'Open menu' : 'Ouvrir le menu'))"
                        [attr.aria-expanded]="isMenuOpen()"
                        class="text-white p-2 rounded-full hover:bg-white/10 active:bg-white/20 transition-colors">
                <svg class="w-6 h-6 drop-shadow-md" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    @if (!isMenuOpen()) {
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 6h16M4 12h16M4 18h16"></path>
                    } @else {
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12"></path>
                    }
                </svg>
                </button>
            </div>
          </div>
        </div>

        @if (isMenuOpen()) {
          <div class="md:hidden mt-2 pt-2 border-t border-white/10 space-y-1 animate-in fade-in slide-in-from-top-2 duration-300">
            <a [routerLink]="localeRoute.getLocalizedRoute('/')"
               routerLinkActive="bg-white/20 text-white font-bold"
               [routerLinkActiveOptions]="{exact: true}"
               (click)="closeMenu()"
               class="block text-white/80 px-4 py-3 rounded-xl hover:bg-white/15 transition-all active:scale-98">
               {{ i18n.text().navbar.home }}
            </a>
            <a [routerLink]="localeRoute.getLocalizedRoute('/about')"
               routerLinkActive="bg-white/20 text-white font-bold"
               (click)="closeMenu()"
               class="block text-white/80 px-4 py-3 rounded-xl hover:bg-white/15 transition-all active:scale-98">
               {{ i18n.text().navbar.about }}
            </a>
            <a [routerLink]="localeRoute.getLocalizedRoute('/achievements')"
               routerLinkActive="bg-white/20 text-white font-bold"
               (click)="closeMenu()"
               class="block text-white/80 px-4 py-3 rounded-xl hover:bg-white/15 transition-all active:scale-98">
               {{ i18n.text().navbar.achievements }}
            </a>
            <a [routerLink]="localeRoute.getLocalizedRoute('/contact')"
               routerLinkActive="bg-white/20 text-white font-bold"
               (click)="closeMenu()"
               class="block text-white/80 px-4 py-3 rounded-xl hover:bg-white/15 transition-all active:scale-98">
               {{ i18n.text().contact.title }}
            </a>
          </div>
        }
      </nav>
    </header>

    <main class="relative z-10 w-full max-w-5xl xl:max-w-6xl 2xl:max-w-7xl mt-20 md:mt-24 mb-12 flex-grow">
      <div class="bg-black/20 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-8 md:p-12 xl:p-16 2xl:p-20 h-full">
        <router-outlet></router-outlet>
      </div>
    </main>

    <footer class="relative z-10 w-full max-w-5xl xl:max-w-6xl 2xl:max-w-7xl mb-4">
      <div class="bg-black/20 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 px-6 py-4 text-white text-center">

        <!-- Social Icons -->
        <div class="flex justify-center space-x-6 mb-4">
          <a href="https://github.com/GaetanOff" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white transition-colors">
            <span class="sr-only">GitHub</span>
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.168 6.839 9.492.5.092.682-.217.682-.482 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.031-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.378.203 2.398.1 2.65.64.7 1.028 1.595 1.028 2.688 0 3.848-2.338 4.695-4.566 4.943.359.308.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.001 10.001 0 0022 12c0-5.523-4.477-10-10-10z" clip-rule="evenodd"></path></svg>
          </a>
          <a href="https://www.instagram.com/gaetan_dev" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white transition-colors">
            <span class="sr-only">Instagram</span>
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.012-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.023.047 1.351.058 3.807.058h.468c2.456 0 2.784-.011 3.807-.058.975-.045 1.504-.207-1.857-.344.467-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.047-1.023.058-1.351.058-3.807v-.468c0-2.456-.011-2.784-.058-3.807-.045-.975-.207-1.504-.344-1.857a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0z" clip-rule="evenodd"></path></svg>
          </a>
        </div>
        <div class="flex justify-center space-x-6 mb-2">
          <a href="https://status.gaetandev.fr" target="_blank" class="text-sm text-gray-300 hover:text-white transition-colors">Status</a>
          <a [routerLink]="localeRoute.getLocalizedRoute('/legal')" class="text-sm text-gray-300 hover:text-white transition-colors">{{ i18n.text().footer.legal }}</a>
          <a [routerLink]="localeRoute.getLocalizedRoute('/legal/cgv')" class="text-sm text-gray-300 hover:text-white transition-colors">{{ i18n.text().footer.cgv }}</a>
        </div>
        <p class="text-xs text-gray-400 flex items-center justify-center">
          <a href="https://www.gaetandev.fr/assets/files/00084228-1_ApplicationWeb_GaetanDev.pdf" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white transition-colors mr-1">Â©</a>
          <span>{{ i18n.text().footer.devWithLove }}</span>
        </p>
        </div>
    </footer>
  }

  @if (isAdminRoute()) {
    <router-outlet></router-outlet>
  }
</div>
